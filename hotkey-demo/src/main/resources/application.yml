server:
  port: 8080

spring:
  redis:
    host: 127.0.0.1
    port: 6379
    timeout: 3000
    lettuce:
      pool:
        max-active: 100
        max-idle: 20
        min-idle: 0

hotkey:
  enabled: true                          # 是否启用，默认true
  detection:
    top-n: 20                            # Top N数量，默认20
    hot-key-qps-threshold: 20            # 热Key QPS阈值（次/秒），默认500，测试时降低到20
    warm-key-qps-threshold: 10           # 温Key QPS阈值（次/秒），默认200
    promotion-interval: 5000             # 晋升间隔（毫秒），默认5000（5秒）
  storage:
    maximum-size: 2000                   # 最大缓存数量，默认TOP_N * 100 = 2000
    expire-after-write: 60               # 过期时间（分钟），默认60
  recorder:
    max-capacity: 100000                 # 访问记录最大容量，默认100000
    window-size: 10                      # 统计窗口大小（秒），默认10
    inactive-expire-time: 120            # 非活跃key过期时间（秒），默认120
  refresh:
    interval: 10000                      # 刷新间隔（毫秒），默认10000（10秒）
  monitor:
    interval: 60000                      # 监控输出间隔（毫秒），默认60000（60秒）
    prometheus:
      enabled: true                      # 启用Prometheus指标，默认true


logging:
  level:
    cn.techwolf.datastar.hotkey: DEBUG  # 临时改为DEBUG以便查看日志
    root: INFO
management:
  endpoints:
    web:
      base-path: /actuator  # 明确指定基础路径
      exposure:
        include: prometheus,health,info,metrics  # 暴露 prometheus 端点
  endpoint:
    health:
      show-details: always
  metrics:
    export:
      prometheus:
        enabled: true  # 启用 Prometheus 导出
    tags:
      application: ${spring.application.name:hotkey-demo}